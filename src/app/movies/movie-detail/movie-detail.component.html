<section>
  <div class="container col-lg-10">
    <div class="card">
      <div class="row">
        <div class="col-md-8">
          <div class="card-block">
            <br>
            <h1 class="card-title">{{movie?.title}}</h1>
            <br>
            <div class="card-text">
              <div class="row">
                <div class="stars col-md-5 col-8 div-center">
                  <td><i class="fa fa-star fa-2x" aria-hidden="true"></i></td>
                  <td><i class="fa fa-star fa-2x" aria-hidden="true"></i></td>
                  <td><i class="fa fa-star fa-2x" aria-hidden="true"></i></td>
                  <td><i class="fa fa-star fa-2x" aria-hidden="true"></i></td>
                  <td><i class="fa fa-star fa-2x" aria-hidden="true"></i></td>
                </div>
                <div class="vals col-md-1 col-4 div-start">
                  <h5 class="number"> {{value5}} </h5>
                </div>
                <div class="col-md-6">
                  <!-- used progress instead of div. Looks okayish. Binded value5 to value
                         Have problems to bind max attribute -->
                  
                  <progress role="progressbar" [attr.value]="value5" [attr.max]="Math.max(value1,value2,value3,value4,value5)"></progress>
                </div>
              </div>
              <br>
              <div class="row">
                <div class="stars col-md-5 col-8 div-center">
                  <td><i class="fa fa-star fa-2x" aria-hidden="true"></i></td>
                  <td><i class="fa fa-star fa-2x" aria-hidden="true"></i></td>
                  <td><i class="fa fa-star fa-2x" aria-hidden="true"></i></td>
                  <td><i class="fa fa-star fa-2x" aria-hidden="true"></i></td>
                </div>
                <div class="vals col-md-1 col-4 div-start">
                  <h5 class="number"> {{value4}} </h5>
                </div>
                <div class="col-md-6">
                  <progress role="progressbar" [attr.value]="value4" [attr.max]="Math.max(value1,value2,value3,value4,value5)"></progress>
                </div>
              </div>
              <br>
              <div class="row">
                <div class="stars col-md-5 col-8 div-center">
                  <td><i class="fa fa-star fa-2x" aria-hidden="true"></i></td>
                  <td><i class="fa fa-star fa-2x" aria-hidden="true"></i></td>
                  <td><i class="fa fa-star fa-2x" aria-hidden="true"></i></td>
                </div>
                <div class="vals col-md-1 col-4 div-start">
                  <h5 class="number"> {{value3}} </h5>
                </div>
                <div class="col-md-6">
                  <progress role="progressbar" [attr.value]="value3" [attr.max]="Math.max(value1,value2,value3,value4,value5)"></progress>
                </div>
              </div>
              <br>
              <div class="row">
                <div class="stars col-md-5 col-8 div-center">
                  <td><i class="fa fa-star fa-2x" aria-hidden="true"></i></td>
                  <td><i class="fa fa-star fa-2x" aria-hidden="true"></i></td>
                </div>
                <div class="vals col-md-1 col-4 div-start">
                  <h5 class="number"> {{value2}} </h5>
                </div>
                <div class="col-md-6">
                  <progress role="progressbar" [attr.value]="value2" [attr.max]="Math.max(value1,value2,value3,value4,value5)"></progress>
                </div>
              </div>
              <br>
              <div class="row">
                <div class="stars col-md-5 col-8 div-center">
                  <td><i class="fa fa-star fa-2x" aria-hidden="true"></i></td>
                </div>
                <div class="vals col-md-1 col-4 div-start">
                  <h5 class="number"> {{value1}} </h5>
                </div>
                <div class="col-md-6">
                  <progress role="progressbar" [attr.value]="value1" [attr.max]="Math.max(value1,value2,value3,value4,value5)"></progress>
                </div>
              </div>
              <br>
              <div class="row">
                <div class="form col-md-12">
                  <h5 class="average">AVERAGE RATING: {{(Math.round((Math.max(value1)*1 + Math.max(value2)*2 + Math.max(value3)*3 + Math.max(value4)*4 + Math.max(value5)*5)*100/(Math.max(value1)*1 + Math.max(value2)*1 + Math.max(value3)*1 + Math.max(value4)*1 + Math.max(value5)*1))/100).toFixed(2)}}
                    / 5.00 </h5>
                </div>
              </div>
            </div>
            <br>
            <div class="card-text">
              <div class="row">
                <!-- making a ngForm for rating system. 
                  Using ngSubmit that is passing fron ngModel one way binding in input and takes #ratingForm.value - WRONG!!!
                  
                  (ngModel) is giving param "rating" in and passes it to #ratingForm!
                  Using ngSumbit to call method in movie-detail.component where ratingForm.value == formValues - GOOD !!!
                  -->
                <div class="form col-md-8 push-md-4">
                  <form #ratingForm="ngForm" (ngSubmit)="saveRating(ratingForm.value)" class="d-flex align-items-stretch">
                    <button type="submit" class="btn btn-secondary" *ngIf="isError2">Your vote!</button>
                    <button type="submit" class="btn btn-secondary" *ngIf="isError">Choose!</button>
                    <rating [(ngModel)]="rating" id="rating" name="rating" iconClass="star" fullIcon="&#xf005;" emptyIcon="&#xf006;"></rating>
                  </form>
                </div>
                <div class="return col-md-4 pull-md-8">
                  <!-- routes to /movies after button click -->
                  <button [routerLink]="['/movies']" type="button" class="btn btn-secondary ">Return</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4 card-img-top">
          <img class="card-img-bottom" src="{{movie?.poster}}" alt="Card image cap">
        </div>
      </div>
    </div>
  </div>
</section>